---
driver:
  name: vagrant
  provider: virtualbox

provisioner:
  name: chef_zero

platforms:
  - name: windows2012r2_chef12
    driver:
      provider: virtualbox
      box: daptiv/windows2012r2_chef11
      box_url: 'http://artrepo.daptiv.com:8081/artifactory/vagrant-local/virtualbox_windows-2012r2_chef-12.5.1_1.0.23.box'
      gui: false
    driver_config:
      communicator: winrm
    transport:
      name: winrm
  - name: ubuntu-14.04-virtualbox
    driver:
      provider: virtualbox
      box: daptiv/trusty64
      box_url: 'http://artrepo.daptiv.com:8081/artifactory/vagrant-local/virtualbox_ubuntu-14.04_chef-12.4.1_1.0.13.box'
      gui: false
      customize:
        memory: 2048
        cpus: 2

suites:
  - name: default
    data_bags_path: <%= ENV['CHEF_DATA_BAGS'] %>
    encrypted_data_bag_secret_key_path: <%= ENV['CHEF_SECRET_FILE'] %>
    run_list:
      - recipe[daptiv_java]
      - recipe[teamcity]
    attributes:
      teamcity:
        agents:
          default:
            server_url: 'http://teamcity.hq.daptiv.com'
